// –†–æ–∑—à–∏—Ä–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö —Å—Ç–æ–ø-—Å–ª—ñ–≤
// const ukrStopwords = [
//   "—ñ", "–≤", "–Ω–µ", "–Ω–∞", "—Ç–∞", "—â–æ", "–∑", "–¥–æ", "—É", "–ø–æ", "–∑–∞", "—è–∫", "—Ç–æ", 
//   "—Ü–µ", "–¥–ª—è", "–ø—Ä–∏", "–≤—ñ–¥", "—ñ–∑", "–¥–æ", "–∞–±–æ", "–±", "–∂–µ", "–∂", "–±–∏", "–±—ñ", 
//   "–π", "–∞", "–Ω–æ", "–ø—Ä–æ", "–ø—ñ–¥", "–Ω–∞–¥", "–ø–µ—Ä–µ–¥", "—á–µ—Ä–µ–∑", "–±–µ–∑", "–∑–æ", "–∑—ñ",
//   "–æ—Ç", "–æ—Å—å", "–æ—Å", "–Ω—É", "—Ö—ñ–±–∞", "–Ω–µ–Ω–∞—á–µ", "–Ω–∞—á–µ", "—è–∫–±–∏", "–∫–æ–ª–∏", "–¥–µ",
//   "–∫—É–¥–∏", "–∑–≤—ñ–¥–∫–∏", "—á–æ–º—É", "–Ω–∞–≤—ñ—â–æ", "—è–∫–∏–π", "—è–∫–∞", "—è–∫–µ", "—è–∫—ñ", "—á–∏–π",
//   "—á–∏—è", "—á–∏—î", "—á–∏—ó", "—Å–∫—ñ–ª—å–∫–∏", "–∫–æ—Ç—Ä–∏–π", "—Ö—Ç–æ", "—â–æ", "—è–∫", "—á–æ–≥–æ",
//   "–∫–æ–º—É", "–∫–∏–º", "—Ü—å–æ–≥–æ", "—Ç–æ–º—É", "—Ü–∏–º", "—É—Å—ñ", "–≤—Å—ñ", "–≤–≤–µ—Å—å", "—É–≤–µ—Å—å",
//   "–∫–æ–∂–µ–Ω", "–±—É–¥—å", "—Ö–æ—á", "—è–∫–∏–π—Å—å", "–¥–µ—è–∫–∏–π", "–∂–æ–¥–µ–Ω", "–Ω—ñ—è–∫–∏–π", "—ñ–Ω—à–∏–π",
//   "—Å–∞–º–∏–π", "–≤–µ—Å—å", "—Ü–µ–π", "—Ç–æ–π", "—Ç–∞–∫–∏–π", "—Å—Ç—ñ–ª—å–∫–∏", "—Ç—É—Ç", "—Ç–∞–º", "—Ç–æ–¥—ñ",
//   "–∑–∞—Ä–∞–∑", "–≤–∂–µ", "—â–µ", "—Ç—ñ–ª—å–∫–∏", "–ª–∏—à–µ", "–º–∞–π–∂–µ", "—Ü—ñ–ª–∫–æ–º", "–∑–æ–≤—Å—ñ–º",
//   "–¥—É–∂–µ", "–∫—Ä–∞—â–µ", "–≥—ñ—Ä—à–µ", "–±—ñ–ª—å—à–µ", "–º–µ–Ω—à–µ", "–¥–æ–±—Ä–µ", "–ø–æ–≥–∞–Ω–æ", "–º–æ–∂–Ω–∞",
//   "—Ç—Ä–µ–±–∞", "–º–æ–∂–µ", "–º—É—Å–∏—Ç—å", "–ø–æ–≤–∏–Ω–µ–Ω", "–Ω—ñ", "—Ç–∞–∫", "–æ—Å—å", "–Ω—É", "–æ—Ç", 
//   "–∂–µ", "–±–æ", "—Ç–æ", "—Ü–µ", "—Ü–µ–π", "—Ü—è", "—Ü–µ", "—Ü—ñ", "—Ç–æ–π", "—Ç–∞", "—Ç–µ", "—Ç—ñ",
//   "—Å–≤—ñ–π", "—Å–≤–æ—è", "—Å–≤–æ—î", "—Å–≤–æ—ó", "–π–æ–≥–æ", "—ó—ó", "—ó—Ö", "–Ω–∞–º", "–≤–∞–º", "—ó–º",
//   "–º–µ–Ω—ñ", "—Ç–æ–±—ñ", "–π–æ–º—É", "—ó–π", "–Ω–∞—Å", "–≤–∞—Å", "—ó—Ö", "–º—ñ–π", "—Ç–≤—ñ–π", "–Ω–∞—à",
//   "–≤–∞—à", "—ó—Ö–Ω—ñ–π", "—Ö—Ç–æ—Å—å", "—â–æ—Å—å", "–¥–µ—Å—å", "–∫—É–¥–∏—Å—å", "–Ω—ñ—Ö—Ç–æ", "–Ω—ñ—â–æ",
//   "–Ω—ñ–¥–µ", "–Ω—ñ–∫—É–¥–∏", "–Ω—ñ—è–∫", "–ø–µ—Ä—à–∏–π", "–¥—Ä—É–≥–∏–π", "—Ç—Ä–µ—Ç—ñ–π", "–±–∞–≥–∞—Ç–æ", "–º–∞–ª–æ",
//   "—Ç—Ä–æ—Ö–∏", "–∫—ñ–ª—å–∫–∞", "–¥–µ–∫—ñ–ª—å–∫–∞", "—Å—Ç—ñ–ª—å–∫–∏", "—Å–∫—ñ–ª—å–∫–∏", "—É—Å—é–¥–∏", "–Ω—ñ–¥–µ",
//   "–∑–∞–≤–∂–¥–∏", "–Ω—ñ–∫–æ–ª–∏", "—ñ–Ω–æ–¥—ñ", "—á–∞—Å—Ç–æ", "—Ä—ñ–¥–∫–æ", "—à–≤–∏–¥–∫–æ", "–ø–æ–≤—ñ–ª—å–Ω–æ",
//   "—Ä–∞–Ω–æ", "–ø—ñ–∑–Ω–æ", "–¥–∞–ª–µ–∫–æ", "–±–ª–∏–∑—å–∫–æ", "–≤–∏—Å–æ–∫–æ", "–Ω–∏–∑—å–∫–æ", "–≥–ª–∏–±–æ–∫–æ",
//   "–≥–µ—Ç—å", "–∑–æ–≤—Å—ñ–º", "–º–∞–π–∂–µ", "–ø—Ä–∏–±–ª–∏–∑–Ω–æ", "—Ä—ñ–≤–Ω–æ", "—Ç–æ—á–Ω–æ", "–¥–µ—Å—å", "–∫—É–¥–∏",
//   "–∑–≤—ñ–¥–∫–∏", "—á–æ–º—É—Å—å", "—è–∫–æ—Å—å", "–¥–µ—Å—å", "—ñ–Ω–æ–¥—ñ", "—á–∞—Å—Ç–æ", "–∑–∞–≤–∂–¥–∏", "–Ω—ñ–∫–æ–ª–∏",
//   "–ø–æ—Ç—ñ–º", "—Ç–æ–¥—ñ", "—Ç–µ–ø–µ—Ä", "–∑–∞—Ä–∞–∑", "—Å—å–æ–≥–æ–¥–Ω—ñ", "–≤—á–æ—Ä–∞", "–∑–∞–≤—Ç—Ä–∞", "—Ä–∞–Ω–æ",
//   "–ø—ñ–∑–Ω–æ", "—à–≤–∏–¥–∫–æ", "–ø–æ–≤—ñ–ª—å–Ω–æ", "–±–∞–≥–∞—Ç–æ", "–º–∞–ª–æ", "—Ç—Ä–æ—Ö–∏", "–∑–æ–≤—Å—ñ–º", "—Ü—ñ–ª–∫–æ–º",
//   "–º–∞–π–∂–µ", "–ø—Ä–∏–±–ª–∏–∑–Ω–æ", "—Ä—ñ–≤–Ω–æ", "—Ç–æ—á–Ω–æ", "–¥–µ—Å—å", "–∫—É–¥–∏", "–∑–≤—ñ–¥–∫–∏", "—á–æ–º—É—Å—å"
// ];

// export function extractKeywords(text = "", topN = 20) {
//   if (!text || typeof text !== "string") return [];

//   console.log("–ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ç–µ–∫—Å—Ç (–ø–µ—Ä—à—ñ 500 —Å–∏–º–≤–æ–ª—ñ–≤):", text.substring(0, 500));

//   // 1) –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è: –Ω–∏–∂–Ω—ñ–π —Ä–µ–≥—ñ—Å—Ç—Ä
//   const lower = text.toLowerCase();

//   // 2) –ø—Ä–æ—Å—Ç–∞ —Ç–æ–∫–µ–Ω—ñ–∑–∞—Ü—ñ—è –Ω–∞ —Å–ª–æ–≤–∞
//   let tokens = lower
//     .split(/[\s\.,!?;:()¬´¬ª""''‚Äì‚Äî]+/) // —Ä–æ–∑–¥—ñ–ª—é–≤–∞—á—ñ
//     .map(token => token.trim())
//     .filter(token => token.length > 0);

//   console.log("–¢–æ–∫–µ–Ω–∏ –ø—ñ—Å–ª—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è:", tokens.length);

//   // 3) –æ—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω—ñ–≤ –≤—ñ–¥ –∑–Ω–∞–∫—ñ–≤ –ø—É–Ω–∫—Ç—É–∞—Ü—ñ—ó
//   tokens = tokens
//     .map(token => token.replace(/[^–∞-—è—ñ—ó—î“ë0-9\-]/gi, "")) // –∑–∞–ª–∏—à–∞—î–º–æ –ª–∏—à–µ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –±—É–∫–≤–∏, —Ü–∏—Ñ—Ä–∏ —Ç–∞ –¥–µ—Ñ—ñ—Å
//     .filter(token => token.length >= 4) // –º—ñ–Ω—ñ–º—É–º 4 —Å–∏–º–≤–æ–ª–∏
//     .filter(token => !token.match(/^\d+$/)) // –≤–∏–¥–∞–ª—è—î–º–æ —á–∏—Å—Ç—ñ —á–∏—Å–ª–∞
//     .filter(token => !token.match(/^[–∞-—è—ñ—ó—î“ë]{1,3}$/)); // –≤–∏–¥–∞–ª—è—î–º–æ –¥—É–∂–µ –∫–æ—Ä–æ—Ç–∫—ñ —Å–ª–æ–≤–∞

//   console.log("–¢–æ–∫–µ–Ω–∏ –ø—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è:", tokens.length);

//   // 4) –≤–∏–¥–∞–ª—è—î–º–æ —Å—Ç–æ–ø-—Å–ª–æ–≤–∞
//   const stopwordsSet = new Set(ukrStopwords);
//   tokens = tokens.filter(token => !stopwordsSet.has(token));

//   console.log("–¢–æ–∫–µ–Ω–∏ –ø—ñ—Å–ª—è —Å—Ç–æ–ø-—Å–ª—ñ–≤:", tokens.length);

//   // 5) —á–∞—Å—Ç–æ—Ç–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –∑ –≤–∞–≥–∞–º–∏
//   const freq = {};
//   tokens.forEach(token => {
//     // –í–∞–≥–∏ –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é —Å–ª–æ–≤–∞
//     let weight = 1;
//     if (token.length > 8) weight = 3;      // –¥–æ–≤–≥—ñ —Å–ª–æ–≤–∞ - –≤–∞–∂–ª–∏–≤—ñ—à—ñ
//     else if (token.length > 6) weight = 2; // —Å–µ—Ä–µ–¥–Ω—ñ —Å–ª–æ–≤–∞
//     else if (token.length === 4) weight = 0.5; // –∫–æ—Ä–æ—Ç–∫—ñ —Å–ª–æ–≤–∞ –º–µ–Ω—à –≤–∞–∂–ª–∏–≤—ñ
    
//     freq[token] = (freq[token] || 0) + weight;
//   });

//   // 6) –°–æ—Ä—Ç—É—î–º–æ –∑–∞ —á–∞—Å—Ç–æ—Ç–æ—é —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä—É—î–º–æ
//   const sorted = Object.entries(freq)
//     .sort((a, b) => {
//       // –°–ø–µ—Ä—à—É –∑–∞ —á–∞—Å—Ç–æ—Ç–æ—é, –ø–æ—Ç—ñ–º –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é —Å–ª–æ–≤–∞
//       if (b[1] !== a[1]) return b[1] - a[1];
//       return b[0].length - a[0].length;
//     })
//     .slice(0, topN * 3) // –±–µ—Ä–µ–º–æ –±—ñ–ª—å—à–µ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è
//     .map(a => a[0]);

//   console.log("–¢–æ–ø —Å–ª–æ–≤–∞ –∑–∞ —á–∞—Å—Ç–æ—Ç–æ—é:", sorted.slice(0, 15));

//   // 7) –§—ñ–ª—å—Ç—Ä—É—î–º–æ —Å–ª–æ–≤–∞ –∑ –Ω–µ–±–∞–∂–∞–Ω–∏–º–∏ —Å—É—Ñ—ñ–∫—Å–∞–º–∏
//   const badSuffixes = [
//     '—Ç—å—Å—è', '–∏—Å—å', '–∞—Ç—å—Å—è', '–∏—Ç—å—Å—è', '—é—Ç—å—Å—è', '—î—Ç—å—Å—è', 
//     '–∞–Ω–Ω—è', '–µ–Ω–Ω—è', '–∏–Ω–Ω—è', '—ñ–Ω–Ω—è', '–æ—Å—Ç—ñ', '—ñ—Å—Ç—å'
//   ];
  
//   const filtered = sorted.filter(word => {
//     // –í–∏–¥–∞–ª—è—î–º–æ —Å–ª–æ–≤–∞ –∑ –Ω–µ–±–∞–∂–∞–Ω–∏–º–∏ —Å—É—Ñ—ñ–∫—Å–∞–º–∏
//     if (badSuffixes.some(suffix => word.endsWith(suffix))) {
//       return false;
//     }
    
//     // –í–∏–¥–∞–ª—è—î–º–æ —Å–ª–æ–≤–∞, —â–æ —Å–∫–ª–∞–¥–∞—é—Ç—å—Å—è –∑ –æ–¥–Ω–∞–∫–æ–≤–∏—Ö –ª—ñ—Ç–µ—Ä
//     if (new Set(word.split('')).size <= 2) {
//       return false;
//     }
    
//     return true;
//   });

//   // 8) –ë–µ—Ä–µ–º–æ —Ç–æ–ø-N —Å–ª—ñ–≤
//   const result = filtered.slice(0, topN);

//   console.log("–§—ñ–Ω–∞–ª—å–Ω—ñ –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞:", result);
//   return result;
// }


// server/src/services/keywordExtractor.js
// import rake from "rake-js";
// import sw from "stopword";

// const ukrStopwords = [
//   "—ñ","–≤","–Ω–µ","–Ω–∞","—Ç–∞","—â–æ","–∑","–¥–æ","—É","–ø–æ","–∑–∞","—è–∫","—Ç–æ","—Ü–µ","–¥–ª—è",
//   "–ø—Ä–∏","–≤—ñ–¥","—ñ–∑","–¥–æ","–∞–±–æ","–ø—Ä–æ","–Ω–∞–¥","–ø—ñ–¥","—á–∏","–∂","–∞–ª–µ","—è–∫–∏–π","—è–∫–∞",
//   "—è–∫—ñ","—ó—Ö","—ó—ó","–≤—ñ–Ω","–≤–æ–Ω–∞","–≤–æ–Ω–∏","–±—É–ª–æ","–±—É—Ç–∏","—î","—Ç–æ—â–æ","—Å–∞–º–µ","—Ç–æ–º—É"
// ];

// export function extractKeywords(text = "", topN = 20) {
//   if (!text || typeof text !== "string") return [];

//   // –ü–æ–ø–µ—Ä–µ–¥–Ω—è –æ—á–∏—Å—Ç–∫–∞
//   const cleaned = text
//     .replace(/[.,\/#!$%\^&\*;:{}=\-_`~()¬´¬ª"‚Äú‚Äù]/g, " ")
//     .replace(/\s{2,}/g, " ")
//     .toLowerCase();

//   console.log("–¢–µ–∫—Å—Ç –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤:", cleaned);

//   // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–ª—é—á–æ–≤–∏—Ö —Ñ—Ä–∞–∑ RAKE
//   const allKeywords = rake(cleaned, { stopWords: ukrStopwords });

//   console.log("rake:", rake);

//   console.log("–í—Å—ñ –≤–∏—Ç—è–≥–Ω—É—Ç—ñ –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞/—Ñ—Ä–∞–∑–∏:", allKeywords);

//   // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ç—ñ–ª—å–∫–∏ —Å–ª–æ–≤–∞/—Ñ—Ä–∞–∑–∏
//   const topKeywords = allKeywords
//     .slice(0, topN)
//     .map(k => k[0].trim()) // k[0] ‚Äî —Å–∞–º–∞ —Ñ—Ä–∞–∑–∞
//     .filter(Boolean);

//   console.log("–¢–æ–ø –≤–∏—Ç—è–≥–Ω—É—Ç—ñ –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞/—Ñ—Ä–∞–∑–∏:", topKeywords);

//   return topKeywords;
// }


const PYTHON_SERVICE_URL = 'http://localhost:5001';

/**
 * –û—Å–Ω–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤ —á–µ—Ä–µ–∑ Python –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å
 */
export async function extractKeywords(text = "", topN = 20) {
  if (!text || typeof text !== "string") {
    console.error("–ù–µ–≤—ñ—Ä–Ω–∏–π —Ç–µ–∫—Å—Ç –¥–ª—è –æ–±—Ä–æ–±–∫–∏");
    return [];
  }

  console.log("üîÑ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–∞–ø–∏—Ç—É –¥–æ Python –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å—É...");
  console.log(`–î–æ–≤–∂–∏–Ω–∞ —Ç–µ–∫—Å—Ç—É: ${text.length} —Å–∏–º–≤–æ–ª—ñ–≤`);
  console.log(`–ó–∞–ø–∏—Ç topN: ${topN}`);

  try {
    const response = await fetch(`${PYTHON_SERVICE_URL}/extract-keywords`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        text: text,
        topN: topN
      }),
      // –¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥
      signal: AbortSignal.timeout(30000)
    });

    if (!response.ok) {
      const errorText = await response.text();
      console.error(`‚ùå HTTP –ø–æ–º–∏–ª–∫–∞! status: ${response.status}`, errorText);
      throw new Error(`–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${response.status}`);
    }

    const data = await response.json();
    
    if (data.error) {
      console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥ Python —Å–µ—Ä–≤—ñ—Å—É:", data.error);
      throw new Error(data.error);
    }

    console.log("‚úÖ –û—Ç—Ä–∏–º–∞–Ω–æ –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ –≤—ñ–¥ Python –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å—É:");
    console.log("–ú–µ—Ç–æ–¥ –æ–±—Ä–æ–±–∫–∏:", data.method);
    console.log("–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤:", data.keywords_count);
    console.log("–ö–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞:", data.keywords);
    
    return data.keywords || [];
    
  } catch (error) {
    console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—ñ –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤ —á–µ—Ä–µ–∑ Python —Å–µ—Ä–≤—ñ—Å:', error);
    
    // –†–µ–∑–µ—Ä–≤–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç - –ª–æ–∫–∞–ª—å–Ω–∞ JavaScript —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
    console.log("üîÑ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó JavaScript —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó...");
    return await extractKeywordsFallback(text, topN);
  }
}

/**
 * –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ Python –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å—É
 */
export async function checkPythonServiceHealth() {
  try {
    const response = await fetch(`${PYTHON_SERVICE_URL}/health`, {
      method: 'GET',
      signal: AbortSignal.timeout(5000)
    });
    
    if (response.ok) {
      const data = await response.json();
      console.log("‚úÖ Python –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å –¥–æ—Å—Ç—É–ø–Ω–∏–π:", data);
      return true;
    } else {
      console.warn("‚ö†Ô∏è Python –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î");
      return false;
    }
  } catch (error) {
    console.warn("‚ö†Ô∏è Python –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π:", error.message);
    return false;
  }
}

/**
 * –†–µ–∑–µ—Ä–≤–Ω–∞ JavaScript —Ñ—É–Ω–∫—Ü—ñ—è (–≤–∞—à –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ–¥)
 */
async function extractKeywordsFallback(text = "", topN = 20) {
  console.log("–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó JavaScript –æ–±—Ä–æ–±–∫–∏...");
  
  // –¢—É—Ç –≤—Å—Ç–∞–≤—Ç–µ –≤–∞—à –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ–¥ –∑ keywordExtractor.js
  // –î–ª—è –ø—Ä–∏–∫–ª–∞–¥—É - —Å–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è:
  
  const ukrStopwords = [
    "—ñ", "–≤", "–Ω–µ", "–Ω–∞", "—Ç–∞", "—â–æ", "–∑", "–¥–æ", "—É", "–ø–æ", "–∑–∞", "—è–∫", "—Ç–æ", 
    "—Ü–µ", "–¥–ª—è", "–ø—Ä–∏", "–≤—ñ–¥", "—ñ–∑", "–¥–æ", "–∞–±–æ", "–±", "–∂–µ", "–∂", "–±–∏", "–±—ñ", 
    "–π", "–∞", "–Ω–æ", "–ø—Ä–æ", "–ø—ñ–¥", "–Ω–∞–¥", "–ø–µ—Ä–µ–¥", "—á–µ—Ä–µ–∑", "–±–µ–∑", "–∑–æ", "–∑—ñ"
  ];

  // –ü—Ä–æ—Å—Ç–∞ —Ç–æ–∫–µ–Ω—ñ–∑–∞—Ü—ñ—è
  const tokens = text.toLowerCase()
    .split(/[\s\.,!?;:()¬´¬ª""''‚Äì‚Äî]+/)
    .map(token => token.replace(/[^–∞-—è—ñ—ó—î“ë0-9\-]/gi, ""))
    .filter(token => token.length >= 4)
    .filter(token => !ukrStopwords.includes(token));

  // –ß–∞—Å—Ç–æ—Ç–Ω–∏–π –∞–Ω–∞–ª—ñ–∑
  const freq = {};
  tokens.forEach(token => {
    freq[token] = (freq[token] || 0) + 1;
  });

  // –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–±—ñ—Ä
  return Object.entries(freq)
    .sort((a, b) => b[1] - a[1])
    .slice(0, topN)
    .map(a => a[0]);
}